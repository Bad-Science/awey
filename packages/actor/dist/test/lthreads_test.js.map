{
  "version": 3,
  "sources": ["../../test/lthreads_test.ts"],
  "sourcesContent": ["import { threadId as systemThreadId, isMainThread } from \"worker_threads\";\nimport { threads, ThreadsDef, WorkerId } from \"../lthreads\";\n\nconst _filename = __filename;\nconsole.log(_filename, systemThreadId, isMainThread);\n\n// const myApp = threads(() => ({\n//   main: () => console.log('hello from main', systemThreadId, isMainThread),\n//   // worker: () => console.log('hello from worker', systemThreadId, isMainThread)\n// }), _filename, { startBehavior: 'all' })\n\n\n// const myWorker = () => console.log('hello from worker!', systemThreadId, isMainThread);\n// const myApp2 = threads(() => ([\n//   () => console.log('hello from main!', systemThreadId, isMainThread),\n//   myWorker, myWorker\n// ]), _filename, { startBehavior: 'all' });\n\nconst waitAndLog = async (id: WorkerId) => {\n  await new Promise(res => setTimeout(res, 5000))\n  console.log(`------HELLO FROM WORKER ${id}`)\n}\n\nconst myApp3 = threads(() => [\n  (id: WorkerId) => console.log('hello from main!', id, isMainThread),\n  {name: 'foo', func: (id: WorkerId) => console.log('hello From Worker!', id, systemThreadId, isMainThread), scale: 5},\n  () => {\n    throw new Error('test error')\n  },\n  async (id: WorkerId) => {\n    console.log(`#------HELLO FROM WORKER ${id}`)\n    await waitAndLog(id)\n    // Exit this worker after logging\n    if (!isMainThread) {\n      console.log(`Worker ${id} is terminating...`);\n      process.exit(42); // Exit with custom code\n    }\n  }\n], _filename, { startBehavior: 'all', onWorkerError: 'Restart' });\n\n"],
  "mappings": "AAAA,4BAAyD;AACzD,sBAA8C;AAE9C,MAAM,YAAY;AAClB,QAAQ,IAAI,WAAW,sBAAAA,UAAgB,kCAAY;AAcnD,MAAM,aAAa,OAAO,OAAiB;AACzC,QAAM,IAAI,QAAQ,SAAO,WAAW,KAAK,GAAI,CAAC;AAC9C,UAAQ,IAAI,2BAA2B,EAAE,EAAE;AAC7C;AAEA,MAAM,aAAS,yBAAQ,MAAM;AAAA,EAC3B,CAAC,OAAiB,QAAQ,IAAI,oBAAoB,IAAI,kCAAY;AAAA,EAClE,EAAC,MAAM,OAAO,MAAM,CAAC,OAAiB,QAAQ,IAAI,sBAAsB,IAAI,sBAAAA,UAAgB,kCAAY,GAAG,OAAO,EAAC;AAAA,EACnH,MAAM;AACJ,UAAM,IAAI,MAAM,YAAY;AAAA,EAC9B;AAAA,EACA,OAAO,OAAiB;AACtB,YAAQ,IAAI,4BAA4B,EAAE,EAAE;AAC5C,UAAM,WAAW,EAAE;AAEnB,QAAI,CAAC,oCAAc;AACjB,cAAQ,IAAI,UAAU,EAAE,oBAAoB;AAC5C,cAAQ,KAAK,EAAE;AAAA,IACjB;AAAA,EACF;AACF,GAAG,WAAW,EAAE,eAAe,OAAO,eAAe,UAAU,CAAC;",
  "names": ["systemThreadId"]
}
